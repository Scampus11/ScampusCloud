ALTER PROCEDURE [dbo].[SP_StaffAccessGroup_CURD]
@Id int = null,
@StaffId nvarchar(50) = '',
@CompanyId uniqueidentifier = null,
@AccessGroupId nvarchar(100) = null,
@Isactive bit = 0,
@CreatedBy uniqueidentifier=null,
@ModifiedBy uniqueidentifier=null,
@ActionType nvarchar(20) = ''
AS

BEGIN
    IF @ActionType = 'Update'
	BEGIN
	    UPDATE Tbl_Mstr_Staff_Access_Group_Control SET AccessGroupId = @AccessGroupId WHERE StaffId = @StaffId
	END

	IF @ActionType = 'Edit' OR @ActionType='Remote'
	BEGIN  
		select C.Id,C.CompanyId,C.StaffId,C.ImagePath,C.ImageBase64,C.FullName AS StaffName,C.Code,
		C.CreatedBy,C.ModifiedBy,C.Isactive,SAGC.Id as AccessGroupControlId
		from Tbl_Mstr_Staff_Master C 
		LEFT JOIN Tbl_Mstr_Staff_Access_Group_Control SAGC ON C.StaffId =  SAGC.StaffId
		WHERE (C.Id=@Id) and C.CompanyId=@CompanyId
	END  
	IF @ActionType = 'Delete'  
	BEGIN  
		UPDATE Tbl_Mstr_Staff_Access_Group_Control SET AccessGroupId = @AccessGroupId WHERE StaffId = @StaffId
	END  
END