ALTER PROCEDURE [dbo].[SP_GetStaffData]
@Search nvarchar(max)=''
,@page INT=1
,@pagesize INT=10
,@CompanyId nvarchar(100)=''

AS

BEGIN
	SELECT C.Id,FullName,C.EmailId,C.StaffId,ISNULL(c.IsDeleted,1) AS IsDeleted,ISNULL(c.IsActive,1) AS IsActive ,c.Code
	,SD.Name As DepartmentName,J.Name As JobTitleName,C.ImagePath,C.ImageBase64,C.SignaturePath,C.SignatureBase64
	from Tbl_Mstr_Staff_Master c
	Left Join Tbl_Mstr_StaffDepartment_Master SD on SD.Id=C.DepartmentId
	Left Join Tbl_Mstr_JobTitle_Master J on J.Id=C.JobTitleId
	WHERE (C.Id LIKE '%' + @Search + '%' or FullName LIKE '%' + @Search + '%' or c.Code LIKE '%' + @Search + '%' or c.EmailId LIKE '%' + @Search + '%'
	or c.StaffId LIKE '%' + @Search + '%') and C.CompanyId=@CompanyId
	ORDER BY C.Id ASC
	OFFSET 	(@Page -1) * @pageSize ROWS
	FETCH NEXT @pageSize ROWS ONLY
END

